<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Finite Mathematics – 11&nbsp; Annuities and Sinking Funds</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Answers.html" rel="next">
<link href="./Compound_Interest.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Simple_Interest.html">Mathematics of Finance</a></li><li class="breadcrumb-item"><a href="./Annuities.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Annuities and Sinking Funds</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Finite Mathematics</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Linear Functions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Intro_LF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to Linear Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ROC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rate of Change</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LF_Applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Applications</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Linear Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Geometric_Method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geometric Method</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LP_Simplex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The Simplex Method</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Transportation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Transportation Problem</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Game Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Intro_to_GT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Intro to Game Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Mixed_strategies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Mixed Strategies</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Mathematics of Finance</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Simple_Interest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Simple Interest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Compound_Interest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Compound Interest</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annuities.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Annuities and Sinking Funds</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Answers</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction-to-annuities" id="toc-introduction-to-annuities" class="nav-link active" data-scroll-target="#introduction-to-annuities"><span class="header-section-number">11.1</span> Introduction to Annuities</a></li>
  <li><a href="#future-value-of-an-ordinary-annuities" id="toc-future-value-of-an-ordinary-annuities" class="nav-link" data-scroll-target="#future-value-of-an-ordinary-annuities"><span class="header-section-number">11.2</span> Future Value of an Ordinary Annuities</a></li>
  <li><a href="#formula-for-the-future-value-of-an-annuity" id="toc-formula-for-the-future-value-of-an-annuity" class="nav-link" data-scroll-target="#formula-for-the-future-value-of-an-annuity"><span class="header-section-number">11.3</span> Formula for the Future Value of an Annuity</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">11.4</span> Exercises</a></li>
  <li><a href="#present-value-of-an-annuity" id="toc-present-value-of-an-annuity" class="nav-link" data-scroll-target="#present-value-of-an-annuity"><span class="header-section-number">11.5</span> Present Value of an Annuity</a></li>
  <li><a href="#formula-for-the-present-value-of-an-annuity" id="toc-formula-for-the-present-value-of-an-annuity" class="nav-link" data-scroll-target="#formula-for-the-present-value-of-an-annuity"><span class="header-section-number">11.6</span> Formula for the Present Value of an Annuity</a></li>
  <li><a href="#exercises-1" id="toc-exercises-1" class="nav-link" data-scroll-target="#exercises-1"><span class="header-section-number">11.7</span> Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Simple_Interest.html">Mathematics of Finance</a></li><li class="breadcrumb-item"><a href="./Annuities.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Annuities and Sinking Funds</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Annuities and Sinking Funds</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction-to-annuities" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="introduction-to-annuities"><span class="header-section-number">11.1</span> Introduction to Annuities</h2>
<p>Consider the following scenario:</p>
<p>Alex has just started a new job that pays him $65,000 per year (about $5,000 per month). By default, his employer deducts 5% of this money ($250) and saves to Alex’s retirement plan which pays an interest of 5% compounded monthly. How much will Alex have in this account after 4 months?</p>
<p>Here are some important things to note about the scenario:</p>
<ul>
<li><p>Unlike the scenarios from the previous chapters, there is <strong>no single</strong> principal amount that is deposited. Rather, there is a recurring deposit of $ 250 that is made monthly.</p></li>
<li><p>The recurring payment is made at the end of each month (the employer cannot make payments before Alex works)</p></li>
<li><p>The first deposit (i.e., the first $ 250) that the employer makes will stays in the bank longest, hence earning the most interest.</p></li>
<li><p>The last deposit (i.e., the one made for the fourth month) does not earn any interest. It stays as $250.</p></li>
</ul>
<p>At this point, you may have already guessed that the the compound interest formula from the previous chapter could be applied in this scenario. The question is, how? We will answer that in the following sections. Before that, however, let us look at some definitions:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p>An <strong>Annuity</strong> is a sequence of payments (usually equal) dispersed or received at equal intervals of time. In the above example, the payments are made monthly.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Simple Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Simple Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>Simple annuity</strong> has the interest compounded at the same frequency as the payments. The above scenario is a simple annuity situation.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Ordinary Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ordinary Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p>An <strong>Ordinary annuity</strong> has payments at the <strong>end</strong> of each compounding period. In the above scenario, the payments are made at the end of every month. So, the above scenario is an ordinary annuity.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Simple Ordinary Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Simple Ordinary Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>Simple Ordinary Annuity:</strong> is an annuity where payments are made at the end of every payment period and where the interest is compounded at the same frequency as the payments. In our example above, payments are made at the end of every month and compounding happens every month. Thus, our scenario above is a simple ordinary annuity.</p>
</div>
</div>
</section>
<section id="future-value-of-an-ordinary-annuities" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="future-value-of-an-ordinary-annuities"><span class="header-section-number">11.2</span> Future Value of an Ordinary Annuities</h2>
<p>Now, we want to find the total amount (future value) that will be in Alex’s retirement account after six months. To do this, we can use the compound interest formula learned in the previous chapter. However, since there are multiple deposits being made, we have to apply the formula separately for each deposit. See below:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Alex's Future Value for the 6 deposits">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alex’s Future Value for the 6 deposits
</div>
</div>
<div class="callout-body-container callout-body">
<p>The first deposit of $ 250 made at the end of the first month will earn interest five times (at the beginning of the second, third, fourth, fifth, and sixth month).</p>
<p>We can compute the future value of the first deposit as follows,</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^{(12\times \frac{5}{12})}\\\\
  &amp;= \$ 255.25

\end{align}\]</span></p>
<p>The second deposit is made and the end of the second month and stays for 4 months. The future value for this deposit can be computed is the same manner as above. See below,</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^4\\\\
  &amp;= \$ 254.19
\end{align}\]</span></p>
<p>For the third deposit, the future value will be</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^3\\\\
  &amp;= \$ 253.14
\end{align}\]</span></p>
<p>For the fourth deposit, the future value will be</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^2\\\\
  &amp;= \$ 252.09
\end{align}\]</span></p>
<p>For the fifth deposit, the future value will be</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^1\\
  &amp;= \$ 251.04
\end{align}\]</span></p>
<p>For the last (sixth) deposit, the future value will be</p>
<p><span class="math display">\[\begin{align}

F &amp;= P\left(1+\frac{r}{m}\right)^n\\\\
  &amp;= 250\left(1+\frac{0.05}{12}\right)^0\\\\
  &amp;= \$ 250
\end{align}\]</span></p>
<p>Thus, the future value for all deposits is the sum of each of the values above,</p>
<p><span class="math display">\[\begin{align}
255.25 + 254.19 + 253.14 + 252.09 + 251.04 + 250 = \$ 1,515.71
\end{align}\]</span></p>
<p>Note that of the money were earning no interest, Alex would have a total of</p>
<p><span class="math display">\[\begin{align}
250\times 6 = \$1,500
\end{align}\]</span></p>
<p>Note that Alex earned a total interest of $15.71 over the six month period.</p>
</div>
</div>
</section>
<section id="formula-for-the-future-value-of-an-annuity" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="formula-for-the-future-value-of-an-annuity"><span class="header-section-number">11.3</span> Formula for the Future Value of an Annuity</h2>
<p>If you wanted to know how much Alex would have saved after 10 years, how many times would you have to repeat the process above? Obviously, that will be a long, tedious, and perhaps boring process.</p>
<p>At this point, you may be wondering whether there is a formula for computing the future value of an annuity without breaking the problem down into several steps as above. The answer to this question is <strong>YES</strong>. I will simply state the formula here but we will “prove” it in class via an exploration activity which will make it a lot easier to understand how it works.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Formula for Future Value of an Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Formula for Future Value of an Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
F=R\left[\frac{(1+i)^n - 1}{i} \right]
\]</span></p>
<p>Where,</p>
<p><span class="math inline">\(F=\)</span> Future Value</p>
<p><span class="math inline">\(i=\)</span> Recurring (or repeating) payment</p>
<p><span class="math inline">\(n=\)</span> total number of payments</p>
<p><span class="math inline">\(i=\)</span> interest rate per compounding period, (i.e., <span class="math inline">\(i=\frac{r}{m}\)</span>)</p>
</div>
</div>
<p>Let us now apply the formula for the earlier stated scenario (Alex’s).</p>
<p>Clearly, <span class="math inline">\(R=250\)</span>, <span class="math inline">\(n = 6\)</span>, and <span class="math inline">\(i=\frac{0.05}{12}\)</span></p>
<p>Thus,</p>
<p><span class="math display">\[\begin{align}
F &amp;= R\left[\frac{(1+i)^n - 1}{i} \right]\\\\

&amp;= 250\left[\frac{\left(1+\frac{0.05}{12}\right)^6 - 1}{\frac{0.05}{12}} \right]\\\\

&amp; = \$ 1,515.71
\end{align}\]</span></p>
<p><strong>Example 1</strong></p>
<p>Maddie is saving towards a new car by making monthly deposits of $750 in an account that earns an interest rate of 6.5% (12). How much will Maddie have in this account after 3 years?</p>
<p><strong><em>Solution</em></strong></p>
<p>First, note that this scenario matches the definition of a simple ordinary annuity. Thus, we can use the formula stated earlier.</p>
<p>We have that <span class="math inline">\(R=750\)</span>, <span class="math inline">\(n = 12\times 3=36\)</span>, and <span class="math inline">\(i=\frac{0.065}{12}\)</span></p>
<p>Plug these into the formula as follows:</p>
<p><span class="math display">\[\begin{align}
F &amp;= R\left[\frac{(1+i)^n - 1}{i} \right]\\\\

&amp;= 750\left[\frac{\left(1+\frac{0.065}{12}\right)^{36} - 1}{\frac{0.065}{12}} \right]\\\\
&amp; = \$ 29,723.76
\end{align}\]</span></p>
<p><strong>Example 2</strong></p>
<p>Alexander, age 20, estimates that he will need $500,000 to live comfortable after retirement (at age 60). Suppose he saves $180 monthly towards his retirement account and that the account pays interest at the rate of 7.15% (12). Will Alexander meet his retirement goal? If not, how much more should he save monthly to achieve the goal?</p>
<p><strong><em>Solution</em></strong></p>
<p>First, note that this scenario matches the definition of a simple ordinary annuity. Thus, we can use the formula stated earlier. We need to calculate the future value of Alexanders annuities and check whether that value is at least $ 500K.</p>
<p>We have that <span class="math inline">\(R=120\)</span>, <span class="math inline">\(n = 12\times 40 = 480\)</span>, and <span class="math inline">\(i=\frac{0.0715}{12}\)</span></p>
<p>Plug these into the formula as follows:</p>
<p><span class="math display">\[\begin{align}
F &amp;= R\left[\frac{(1+i)^n - 1}{i} \right]\\\\

&amp;= 180\left[\frac{\left(1+\frac{0.0715}{12}\right)^{480} - 1}{\frac{0.0715}{12}} \right]\\\\

&amp; = \$ 492, 841.40
\end{align}\]</span></p>
<p>Alexander cannot meet the goal. He is short by $7,158.6</p>
<p>To find how much he should save monthly, we set <span class="math inline">\(F = 500,000\)</span> and solve for <span class="math inline">\(R\)</span>. See below:</p>
<p><span class="math display">\[\begin{align}
500,000 &amp;= R\left[\frac{(1+\frac{0.0715}{12})^{480} - 1}{\frac{0.0715}{12}} \right]\\

500,000 &amp;= R\times 2738.00775298\\\\

R &amp;=\frac{500,000}{2738.00775298}\\\\

&amp; = \$ 182.61
\end{align}\]</span></p>
<p>Thus, Alexander should save $2.61 more per month to achieve the goal of $500K. It is like foregoing just a cup of coffee per month.</p>
</section>
<section id="exercises" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="exercises"><span class="header-section-number">11.4</span> Exercises</h2>
<ol type="1">
<li><p>Find the future value if deposits of $2,000 are made quarterly for three and half years at 9% compounded quarterly.</p></li>
<li><p>Mr.&nbsp;Brown wants to give his son an annuity of $ 2,500 per year starting on his twenty first birthday, which he will increase to $ 5,000 per year on his twenty fifth birthday, with a final payment on his thirtieth birthday. Assuming the interest rate is 6.99 % (1), compute the future value of this annuity (i.e., when this son turns 30).</p></li>
<li><p>Hannah wishes to accumulate $ 80,000 in a fund at the end of 20 years. She makes weekly deposits of $ 90 into an ordinary annuity account at an interest rate of 4.99 %(52). Is Hannah able to meet her target of $ 80,000?</p></li>
<li><p>Mark decides that he needs to save $24,999 in five years to put towards a new vehicle. How much should he invest every month into an ordinary annuity account earning 4.99 % compounded monthly?</p></li>
<li><p>Find the future value of 35 years worth of $30 monthly deposits at 3.5%(12).</p></li>
<li><p>A factory estimates it will have to replace a certain equipment at a cost of $800,000 in 5 years. To do this they decide to deposit equal monthly payments into an account paying 6.6% compounded monthly. How much should each deposit be?</p></li>
<li><p>Emma deposits $2000 annually into a retirement account that earns 6.85% compounded annually. Due to a change in employment, these deposits stop after 10 years, but the account continues to earn interest until Emma retires 25 years after the last deposit is made. How much is in the account when Emma retires?</p></li>
<li><p>Hannah wishes to accumulate $ 80,000 by making weekly deposits of $ 90 into an ordinary annuity account at an interest rate of 4.99 %(52). How long (years) will it tale Hannah take to reach her goal?</p></li>
<li><p>If you make monthly deposits of $310 into an ordinary annuity account earning 5.17% compounded monthly, how many deposits must you make so that you will have at least $210,000? (Note: your answer should be a whole number/integer)</p></li>
<li><p>Ed and Trixie would like to have $30,000 for a down payment on a house. Their budget only allows them to save $3198.28 per half-year. How many years will it take them to save up the desired amount of $30,000? Assume that their saving account will pay 9% compounded semi-annually.</p></li>
<li><p>Alicia paid $27,000 down on a new house and will pay $531 per month for 30 years. If the interest rate is 6.99% compounded monthly, find the total amount that Alicia will end up paying for the house.</p></li>
</ol>
</section>
<section id="present-value-of-an-annuity" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="present-value-of-an-annuity"><span class="header-section-number">11.5</span> Present Value of an Annuity</h2>
<p>Consider the following scenario:</p>
<p>A millionaire is willing to donate a lump sum of money to some college to sponsor a certain program for two years. The college will deposit this sum in an account that earns 6% interest compounded semiannually (twice a year). The problem here is to find the minimum amount that the donor needs to give for the college to withdraw $50,000 semiannually for two years.</p>
<p>Note the following:</p>
<ul>
<li><p>The college will make 4 withdrawals over a 2-year period, hence there will be 4 withdrawals.</p></li>
<li><p>The total withdrawn amount will be $ 200,000.</p></li>
<li><p>If the money were not earning any interest, the donor will have to give the whole amount (i.e., $200,000). Thus, we expect that the money to be donated to be less than $200,000.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Present Value of an Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Present Value of an Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <strong>present value</strong> of an annuity is the amount that would have to be deposited in one lump sum today (at the same compound interest rate) in order to produce exactly the same balance at the end of the annuity.</p>
</div>
</div>
<p>Notice that the millionaire donor scenario matches the definition of a present value. The question is, how can we find the lump sum amount (present value) that the donor needs to give?</p>
<p>To solve this problem, can can use the same approach as for the future value but instead of calculating the future value for each deposit, we calculate the present value for each withdrawal. See below:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Present value for each Withdrawal">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Present value for each Withdrawal
</div>
</div>
<div class="callout-body-container callout-body">
<p>The first withdrawal of $ 50,000 is made at after six months. The second is made after one year, and the third after a year and half. The last is made after exactly 2 years.</p>
<p>Note that we are using the present value formula for compound interest, which can be stated as,</p>
<p><span class="math display">\[\begin{align}
P &amp;= \frac{F}{(1+i)^n}
\end{align}\]</span></p>
<p>For the first withdrawal, the present value is,</p>
<p><span class="math display">\[\begin{align}
P &amp;= \frac{50,000}{(1+\frac{0.06}{2})^1}\\\\
  &amp;= \$48543.69
\end{align}\]</span></p>
<p>For the second withdrawal, the present value is,</p>
<p><span class="math display">\[\begin{align}
P &amp;= \frac{50,000}{(1+\frac{0.06}{2})^2}\\\\
  &amp;= \$47,129.80

\end{align}\]</span></p>
<p>For the third withdrawal,</p>
<p><span class="math display">\[\begin{align}
P &amp;= \frac{50,000}{(1+\frac{0.06}{2})^3}\\\\
  &amp;= 45,757.08
\end{align}\]</span></p>
<p>And for the last (fourth),</p>
<p><span class="math display">\[\begin{align}
P &amp;= \frac{50,000}{(1+\frac{0.06}{2})^4} \\\\
  &amp;= 44,424.35
\end{align}\]</span></p>
<p>Thus, the present value (P) for the above annuity would be,</p>
<p><span class="math display">\[\begin{align}
48,543.69 + 47,129.80 + 45,757.08 + 44,424.35 = \$ 185,854.92
\end{align}\]</span></p>
<p>Note that if there was no interest being earned, the donor would have to deposit $200K for the college to withdraw 50K every six months for two years. The savings made here arise from the fact that the money is earning interest.</p>
</div>
</div>
</section>
<section id="formula-for-the-present-value-of-an-annuity" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="formula-for-the-present-value-of-an-annuity"><span class="header-section-number">11.6</span> Formula for the Present Value of an Annuity</h2>
<p>What if the donor wanted the college to be able to withdraw 50K every six months for a period of 30 years? How much should the donor give? Well, using the above process would be tedious and prone to errors.</p>
<p>To find the present value of an annuity, we can use the following formula (developed through in-class activity):</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Formula for Present Value of an Annuity">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Formula for Present Value of an Annuity
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
P = R\left[\frac{1-(1+i)^{-n}}{i} \right]
\]</span></p>
<p>Where,</p>
<p><span class="math inline">\(P=\)</span> Present Value</p>
<p><span class="math inline">\(i=\)</span> Recurring (or repeating) payment/withdrawal</p>
<p><span class="math inline">\(n=\)</span> total number of payments</p>
<p><span class="math inline">\(i=\)</span> interest rate per compounding period, (i.e., <span class="math inline">\(i=\frac{r}{m}\)</span>)</p>
</div>
</div>
<p>Let us use the present value formula for the donor scenario above,</p>
<p>We have, <span class="math inline">\(R=50,000\)</span>, <span class="math inline">\(n=4\)</span>, and <span class="math inline">\(i=\frac{0.06}{2}=0.03\)</span></p>
<p>Thus,</p>
<p><span class="math display">\[\begin{align}
P &amp;= 50000\left[\frac{1-(1+0.03)^{-4}}{0.03} \right]\\\\
  &amp;=\$ 185,854.92
\end{align}\]</span></p>
<p><strong>Example 3</strong></p>
<p>Jayne is a freshman in college. She has an online savings account that pays interest at the rate of 7.99%(12). Her parents want to deposit money in this bank account so that Jayne can withdraw $2,500 every month for four months. What is the minimum amount that should be deposited in Jayne’s account?</p>
<p><strong><em>Solution</em></strong></p>
<p>First, note that this problem is asking for the present value (P) of an annuity. If Jayne’s account were paying no interest, she would need 10K deposited (i.e., 2500 times 4). Since the account earns some interest, we know that the parents will need to deposit less than 10K.</p>
<p>We have that <span class="math inline">\(R=2,500\)</span>, <span class="math inline">\(n = 4\)</span>, and <span class="math inline">\(i=\frac{0.0799}{12}=0.00665833\)</span></p>
<p>Next, plug these values into the formula as follows:</p>
<p><span class="math display">\[\begin{align}
P &amp;= 2500\left[\frac{1-(1+0.00665833)^{-4}}{0.00665833} \right]\\\\
  &amp;=\$ 9,835.73
\end{align}\]</span></p>
<p><strong>Example 4</strong></p>
<p>Suppose that in example 3 above, Jayne’s parents deposited $ 15,000. How much will Jayne be able to withdraw monthly for four months?</p>
<p><strong><em>Solution</em></strong></p>
<p>Notice that this problem still requires the use of the present value an an annuity formula. However, the unknown quantity here is <span class="math inline">\(R\)</span>. We can proceed as follows:</p>
<p><span class="math display">\[\begin{align}
15000 &amp;= R\left[\frac{1-(1+0.00665833)^{-4}}{0.00665833} \right]\\\\
      &amp;= R \times 3.9342931446\\\\
  R &amp;= \frac{15000}{3.9342931446}\\\\
  &amp;= \$ 3,812.63
\end{align}\]</span></p>
<p>Thus, if Jayne’s parents deposited $15,000, Jayne would be able to withdraw about $ 3,812.63 every month for 4 months.</p>
</section>
<section id="exercises-1" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="exercises-1"><span class="header-section-number">11.7</span> Exercises</h2>
<ol type="1">
<li><p>James purchased a car on a 5-year credit plan and is making monthly payments of $349.55. Given that the interest rate being charged is 13.99%(12), find the selling price (cash value) of the car.</p></li>
<li><p>For the problem in #1, how much interest will James end up paying?</p></li>
<li><p>The marked price of a house is $229,500. A given bank will give you credit at an interest rate of 11.99% (12) to purchase the house. How much will your monthly payments be assuming you plan to pay over a 20-year period?</p></li>
<li><p>How much interest will you end up paying for the house in problem #3 above?</p></li>
<li><p>A certain LG TV set costs $1,299 cash at BJ’s store. The cashier tells you that you can qualify for credit card at an interest rate of 19.99% compounded monthly. How much will you end up paying for the TV if you decide to take the credit on a y-year payment plan? How much interest would you end up paying?</p></li>
<li></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Compound_Interest.html" class="pagination-link" aria-label="Compound Interest">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Compound Interest</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Answers.html" class="pagination-link" aria-label="Answers">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Answers</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>